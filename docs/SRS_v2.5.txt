Sarthi: System Requir ements Speciï¬cation (SRS) v2.5 - FINAL
Version:  2.5 - Agentic Coach with Psychological Safety
Date:  January 3, 2026
Project:  Comet Resolution v2 Hackathon - Productivity Category
Status:  Implementation-Ready
ğŸ¯ Product Philosophy: "Supportive Autonomy"
The Reconciliation:  Sarthi is an agentic AI coach  (proactive, autonomous, outcome-focused) that
operates with psychological safety principles  (non-judgmental, permission-based, respects cognitive load).
Core Tension Resolved:
âœ… Agentic:  Takes initiative, plans autonomously , intervenes predictively
âœ… Safe:  Never commands, always of fers choices, respects "no"
âœ… Transpar ent: Shows reasoning, allows undo, explains every action
Voice Example:
âŒ Pushy Coach: "Y ou missed your workout. Get it done by 6 PM."
âŒ Passive Tool: "W ould you like me to suggest a workout time?"
âœ… Sarthi:  "I noticed you missed 9 AM. I moved it to 6 PM (your usual backup time). Work for
you? [Y es] [Pick dif ferent time] [Skip today]"
Table of Contents
1. Hackathon Alignment & MVP  Scope
2. System Overview
3. User Personas & Journeys
4. MVP  Functional Requirements
5. Permission & Autonomy Controls
6. UX Design Speciï¬cations
7. Technical Architecture
8. Data Models
9. API Speciï¬cations

10. Observability (Opik Integration)
11. Success Metrics (Outcomes + Guardrails)
12. Implementation Plan (4 Weeks)
1. Hackathon Alignment & MVP  Scope
1.1 Hackathon Requir ements
Comet Resolution v2:  Build an AI agent that meaningfully helps people keep their resolutions with measurable
impact and observability .
Sarthi's Fit:
âœ… Agentic Behavior:  3 autonomous agents (decomposer , scheduler , accountability)
âœ… Measurable Impact:  Resolution completion rate, habit consistency , intervention ef fectiveness
âœ… Observability:  Full Opik integration with 12+ metrics (AI quality + user outcomes + guardrails)
âœ… Innovation:  Dual-input model (structured resolutions + brain dump signals)
1.2 MVP  Featur e Prioritization (Realistic 4-W eek Build)
P0 (Must Ship - Week 1-3):
Featur e Agentic Level Build Effort Hackathon Value
1. Dual Intake:  Brain Dump + Resolution Setup Medium 1 week Shows UX innovation
2. Resolution Decomposer  Agent High 1 week Core agentic demo
3. Weekly Micr o-Resolution Generator High 3 days Autonomous planning
4. Basic Intervention System Medium 1 week Outcome driver
P1 (Nice to Have - Week 4):
Featur e Build Effort If Time Allows
Daily schedule optimization 1 week Start with manual conï¬rm, add auto later
Pattern recognition 1 week Start with heuristics (e.g., "90% success on Mon 9 AM")
P2 (Post-Hackathon):

ML-based pattern prediction
Advanced background job scheduling
Deep Work Shield
Strategic Trade-off:  We're cutting daily auto-scheduling  from MVP  to focus on:
1. Perfect execution of resolution decomposition
2. Robust intervention system
3. Rich Opik observability
This reduces implementation risk while keeping the agentic thesis strong.
2. System Overview
2.1 High-Level Architectur e
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     React Native Mobile App         â”‚
â”‚  â€¢ Brain Dump (always accessible)   â”‚
â”‚  â€¢ Resolution Setup (structured)    â”‚
â”‚  â€¢ Today View (agent-curated)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ HTTPS/REST
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      FastAPI Backend                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Dual Intake Processor        â”‚   â”‚
â”‚  â”‚   â€¢ Brain dump â†’  signal        â”‚   â”‚
â”‚  â”‚   â€¢ Resolution â†’  structure     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Agent Controller             â”‚   â”‚
â”‚  â”‚   1. Decomposer (autonomous)   â”‚   â”‚
â”‚  â”‚   2. Weekly Planner (scheduled) â”‚   â”‚
â”‚  â”‚   3. Intervention (reactive)   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼                â–¼         â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”

2.2 Agent Responsibilities (Simpliï¬ed for  MVP)
Agent 1: Resolution Decomposer
Trigger:  User creates new resolution
Autonomy:  Generates 4-12 week plan + Week 1 tasks automatically
Permission Model:  User must conï¬rm before activation
Opik Traces:  resolution_decomposition
Agent 2: Weekly Micr o-Resolution Planner
Trigger:  Every Sunday 8 PM (automated job)
Autonomy:  Generates next week's tasks based on last week's performance
Permission Model:  User receives push notiï¬cation to review/accept
Opik Traces:  weekly_planning
Agent 3: Intervention Coach
Trigger:  Slippage detection (Thursday check if <50% toward goal)
Autonomy:  Detects risk, generates personalized recovery plan
Permission Model:  Offers 3 options (get back on track / adjust goal / take break)
Opik Traces:  slippage_intervention
NOT  in MVP  (but documented for  v2):
Daily auto-scheduling (too complex for 4 weeks)
ML-based pattern prediction (start with simple heuristics)
Proactive morning check-ins (save for post-demo)
3. User  Personas & Journeys
3.1 Primary Persona: "Resolution Rachel"
Demographics:â”‚ OpenAI â”‚       â”‚ Postgres â”‚  â”‚ Opik â”‚  â”‚ APSched â”‚
â”‚  LLM   â”‚       â”‚  +pgvec â”‚  â”‚     â”‚  â”‚ (weekly) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Age: 28-35, knowledge worker
Resolutions: "Exercise 3x/week", "Read 12 books/year", "Launch side project"
Pain: Starts strong, loses momentum by Week 3, needs accountability without guilt
What She Needs:
1. Easy start:  Shouldn't take >2 min to set up resolution
2. Autonomy:  Agent breaks down goal, she conï¬rms
3. Flexibility:  Can reschedule/adjust without feeling like she "failed"
4. Clarity:  Always knows if she's on track
5. Safety valve:  Can "brain dump" overwhelm without it becoming more tasks
3.2 Dual-Input Journey (The Innovation)
Path A: Structur ed Resolution Setup
Path B: Brain Dump as Signal (The Differ entiator)User Action: Taps "New Resolution"
Agent: "What resolution would you like to work on?"
User: Types "Exercise 3x per week"
Agent (Autonomous):
- Generates 12-week plan
- Creates Week 1 tasks (Mon 9AM, Wed 7PM)
- Shows for approval
User: Reviews â†’  Taps "Looks good!"
Agent: Locks in, sets Sunday reminder for Week 2 planning
Emotional Arc: Motivated â†’  Supported â†’  Confident

Key Insight:  Brain dump is NOT  for task creation. It's a pressur e release valve  that gives the agent context
about:
User's emotional state (overwhelmed, motivated, etc.)
Blockers ("had a meeting conï¬‚ict")
Intent shifts ("maybe 3x/week is too much")
This allows the agent to adapt its interventions  based on qualitative signals, not just completion data.
4. MVP  Functional Requir ements
4.1 Featur e 1: Dual Intake System
FR-1.1: Brain Dump (Pr essur e Relief)
Priority:  P0 (Core UX dif ferentiator)
Agentic Level:  Medium (Processes for signals, doesn't auto-create tasks)
User  Story:
As Rachel, when I'm str essed or have scatter ed thoughts, I want to dump them quickly so I feel hear d, and the
agent can use that context to help me without cr eating mor e work.User Action: Taps "Brain Dump" (always visible button)
User: "Feeling overwhelmed, missed my workout today , 
       worried I'm falling behind on exercise goal"
Agent (Signal Processing):
- Detects: emotion (overwhelm), event (missed workout), 
  resolution reference (exercise)
- Does NOT  create new task (avoids task creep)
- Uses as input signal
Agent Response:
"Got it. Sounds like today was tough. I see you're 
at 1/2 workouts this week. Want me to reschedule 
Wednesday's session for this weekend instead?"
[Yes] [No, I'll handle it]
If Yes: Agent reschedules autonomously
If No: Agent acknowledges, doesn't push
Emotional Arc: Stressed â†’  Heard â†’  Relieved

Acceptance Criteria:
 "Brain Dump" button is always visible (home screen sticky button)
 Tapping opens fullscreen text input (auto-focused keyboard)
 User types/pastes unstructured text (max 2000 chars)
 Submit triggers:
Signal extraction  (LLM identiï¬es: emotions, blockers, resolution references)
Acknowledgment  (empathetic conï¬rmation)
Optional action  (if agent detects actionable intent, of fers to help)
 Does NOT  auto-create tasks (avoids overwhelm)
 All signal processing logged to Opik
Technical Speciï¬cation:
Opik Trace Structur e:python
# LLM Pr ompt: Brain Dump Signal Extractor
BRAIN_DUMP_SIGNAL_PROMPT  = """
User's brain dump: "{input_text}"
Active resolutions: {user_resolutions}
Extract signals (do NOT  create tasks):
1. Emotional state: overwhelmed | stressed | motivated | neutral
2. Resolution references: which resolutions mentioned?
3. Blockers: what's preventing progress?
4. Intent shifts: does user want to adjust goals?
Return JSON:
{{
  "emotional_state": "overwhelmed",
  "resolution_refs": ["Exercise 3x/week"],
  "blockers": ["Meeting conflict on Wednesday"],
  "intent_shift": "possibly wants to reduce frequency",
  "actionable": true,
  "suggested_response": "Sounds like Wednesday is tough. Want me to move workouts to weekends?"
}}
Principles:
- Acknowledge feelings ("tough day")
- Don't judge ("you should have...")
- Offer help, don't command
"""

Example Flow:
Edge Cases:
No resolution reference â†’  Just acknowledge: "Thanks for sharing. I've noted this."
Pure emotional vent â†’  Supportive response: "Rough day . You've got this."
Actionable but user says "No thanks" â†’  Agent backs of f, doesn't push
FR-1.2: Resolution Setup (Structur ed Intake)
Priority:  P0 (Core agentic feature)
Agentic Level:  High (Autonomous decomposition)
User  Story:
As Rachel, I want to tell the agent my big goal and have it br eak it down into achievable milestones so I don't
have to plan everything myself.
Acceptance Criteria:
 User navigates to "New Resolution"
 Conversational form: "What resolution would you like to work on?"
 User types free text (e.g., "Exercise 3x per week")python
{
  "trace_name" : "brain_dump_processing" ,
  "spans" : [
    {"name" : "signal_extraction" , "llm_tokens" : 450},
    {"name" : "resolution_matching" , "vector_similarity" : 0.87},
    {"name" : "empathy_generation" , "llm_tokens" : 120}
  ],
  "metadata" : {
    "emotional_state" : "overwhelmed" ,
    "actionable" : true,
    "user_accepted_help" : true
  }
}
User: "Ugh missed my run today , work was crazy"
Agent: "Got it. Sounds like today was packed. You're 
       at 1/2 workouts this week. Want me to move 
       Wednesday's to Saturday 10 AM instead?"
       [Yes, reschedule] [No thanks]

 Agent autonomously:
Classiï¬es type (habit, project, learning)
Generates 4-12 week milestone plan
Creates Week 1 speciï¬c tasks (2-5 tasks with suggested times)
 Shows plan for user approval
 User can: Accept / Edit tasks / Regenerate with dif ferent approach
 Once accepted, agent sets Sunday reminder for Week 2 planning
LLM Pr ompt:
python

Opik Metrics:
decomposition_quality (LLM-as-Judge: Are tasks speciï¬c and achievable?)
user_acceptance_rate (% of generated plans accepted without edits)
plan_generation_time (target: <3s)
4.2 Featur e 2: Weekly Micr o-Resolution PlannerRESOLUTION_DECOMPOSER_PROMPT  = """
User's resolution: "{resolution_text}"
Today: {current_date}
User context: {user_schedule_hints}
Generate a realistic plan:
1. Classify: habit | project | learning | health
2. Set duration: 4-12 weeks (prefer 12 for habits)
3. Create milestones:
   - Week 1-2: Easier (build momentum)
   - Week 3+: Full tar get
4. For Week 1, generate 2-4 specific tasks with times
Return JSON:
{{
  "type": "habit",
  "title": "Exercise 3x per week",
  "duration_weeks": 12,
  "milestones": [
    {{
      "week": 1,
      "tar get": "2 sessions (warmup)",
      "tasks": [
        {{"title": "30-min jog", "day": "Monday", "time": "09:00", "duration_min": 30}},
        {{"title": "Y oga class", "day": "W ednesday", "time": "19:00", "duration_min": 45}}
      ]
    }}
  ]
}}
Coaching principles:
- Week 1 should feel achievable (not overwhelming)
- Tasks must be specific (activity + duration)
- Respect common work schedules (avoid midday)
"""

FR-2.1: Automated Weekly Planning
Priority:  P0 (Core agentic behavior)
Agentic Level:  High (Fully autonomous)
User  Story:
As Rachel, I want the agent to automatically cr eate my weekly plan based on how I did last week, so I always
know what to focus on without having to think about it.
Acceptance Criteria:
 Every Sunday at 8 PM, automated job runs for all users with active resolutions
 Agent analyzes last week:
Tasks completed vs tar get
Patterns (which days user succeeded)
Missed tasks and reasons (from brain dumps if available)
 Agent generates next week's tasks:
Maintains tar get (e.g., 3x/week) if user succeeded
Adjusts difï¬culty if user struggled (<50% completion)
Avoids days/times where user consistently missed
 Sends push notiï¬cation: "Y our week is planned! Tap to review ."
 User can view , edit, or conï¬rm plan
 All planning logic logged to Opik
Agentic Logic:
python

@scheduler .scheduled_job ('cron' , day_of_week ='sun', hour=20)
async  def generate_weekly_plans ():
    users = await  get_users_with_active_resolutions ()
    
    for user in users :
        with opik .track (name="weekly_planning" , user_id=user.id):
            resolutions = user .active_resolutions
            
            for resolution in resolutions :
                # Analyze last week
                last_week = await  analyze_week_performance (resolution .id)
                
                # Adaptive planning
                if last_week .completion_rate < 0.5:
                    # User struggled - r educe W eek 2 tar get
                    next_week_plan = await  generate_plan (
                        resolution ,
                        tar get=resolution .target - 1,  # e.g., 2x instead of 3x
                        dif ficulty="easier"
                    )
                    reason = "reduced_tar get"
                elif last_week .completion_rate >= 0.8:
                    # User succeeded - maintain or incr ease
                    next_week_plan = await  generate_plan (
                        resolution ,
                        tar get=resolution .target,
                        dif ficulty="maintain"
                    )
                    reason = "on_track"
                
                # Avoid failur e patterns
                failed_days = last_week .get_failed_days ()  # e.g., ["W ednesday"]
                next_week_plan .avoid_days (failed_days )
                
                # Save and notify
                await  save_weekly_plan (next_week_plan )
                await  send_notification (
                    user .id,
                    f"Week {next_week_plan .week_number } is ready! {len(next_week_plan .tasks )} tasks planned." ,
                    action ="review_plan"
                )
                
                # Opik logging
                opik .log_feedback (
                    trace_id =trace_id ,
                    metric_name ="weekly_plan_generated" ,

Permission Model:
Agent generates plan autonomously
User receives notiï¬cation (not intrusive - single push)
User can review before Monday
If user doesn't review , plan is assumed accepted (low friction)
4.3 Featur e 3: Intervention System (Simpliï¬ed)
FR-3.1: Thursday Slippage Check
Priority:  P0 (Outcome driver)
Agentic Level:  Medium (Detects + of fers options, doesn't force)
User  Story:
As Rachel, when I'm falling behind on my goal, I want the agent to pr oactively help me get back on track befor e
the week ends, without making me feel guilty .
Acceptance Criteria:
 Every Thursday at 7 PM, automated job checks all users
 For each active resolution:
Calculate: current progress vs weekly tar get
If progress <50% AND â‰¥2 days left in week â†’  Trigger intervention
 Agent generates intervention message:
Acknowledges current state (no judgment)
Offers 3 clear options:
1. Get back on track (suggests speciï¬c actions)
2. Adjust goal (reduce tar get for this week)
3. Take a break week (no guilt)
 User selects option â†’  Agent acts accordingly
 All interventions logged to Opik with outcome                    value =1.0,
                    metadata ={
                        "completion_last_week" : last_week .completion_rate ,
                        "adjustment_reason" : reason ,
                        "tasks_planned" : len(next_week_plan .tasks )
                    }
                )

Example Intervention:
Implementation:Push Notification (Thursday 7 PM):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Quick Check-In
I noticed you've done 1 workout this 
week (goal: 3). Life got busy?
Tap to see options â†’
[In-App Card]
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
No judgment! Here are your options:
Option 1: Get Back on Track
- Schedule Sat 10 AM + Sun 3 PM
- Still hit your 3x goal
Option 2: Adjust This Week
- Try 2x this week instead
- Resume 3x next Monday
Option 3: Take a Break Week
- Pause until next Monday
- No streak penalty
What works for you?
python

Opik Metrics:
intervention_effectiveness - % of users who recover (complete â‰¥tar get after intervention)
option_selection_distribution - Which options users choose most@scheduler .scheduled_job ('cron' , day_of_week ='thu', hour=19)
async  def check_for_slippage ():
    users = await  get_users_with_active_resolutions ()
    
    for user in users :
        resolutions = user .active_resolutions
        
        for res in resolutions :
            progress = await  calculate_week_progress (res.id)
            days_left = 7 - datetime .now().weekday ()  # Days until Sunday
            
            # Intervention criteria
            if progress .completion_rate < 0.5 and days_left >= 2:
                with opik .track (name="slippage_intervention" ):
                    # Generate options
                    options = await  intervention_agent .generate_options ({
                        "resolution" : res.title,
                        "current" : progress .completed ,
                        "target": progress .target,
                        "days_left" : days_left ,
                        "user_history" : user .past_adjustments
                    })
                    
                    # Send notification
                    await  send_push (
                        user .id,
                        "Quick Check-In" ,
                        "Tap to see options" ,
                        data ={"intervention_id" : intervention .id}
                    )
                    
                    # Log to Opik
                    opik .log_trace (
                        "intervention_sent" ,
                        metadata ={
                            "resolution_id" : res.id,
                            "completion_rate" : progress .completion_rate ,
                            "options_of fered" : len(options )
                        }
                    )

false_positive_rate - % interventions sent when user would have succeeded anyway
5. Permission & Autonomy Contr ols
5.1 Explicit Permission Model
Core Principle:
Agent acts autonomously within user -deï¬ned boundaries . User always has control.
Permission Levels (User  Settings):
Permission Type Default What It Contr ols
Weekly Planning ON (opt-out) Agent generates weekly plans automatically
Interventions ON (opt-out) Agent sends Thursday slippage checks
Push Notiï¬cations ON (with caps) All proactive agent messages
Quiet Hours 10 PM - 8 AM No notiï¬cations during these hours
Notiï¬cation Fr equency Cap 3/day max Prevents spam
Settings UI:

5.2 Agent Actions Log (T ranspar ency)
Requir ement:
Every autonomous action the agent takes is logged in-app with undo option.
Example Log Entry:â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent Controls                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  Weekly Planning          [ON]      â”‚
â”‚  Agent creates your weekly plan     â”‚
â”‚  automatically every Sunday         â”‚
â”‚                                     â”‚
â”‚  Interventions            [ON]      â”‚
â”‚  Agent checks in if you're falling  â”‚
â”‚  behind (Thursdays only)            â”‚
â”‚                                     â”‚
â”‚  Push Notifications       [ON]      â”‚
â”‚  Max 3 per day                      â”‚
â”‚                                     â”‚
â”‚  Quiet Hours              [EDIT]    â”‚
â”‚  Currently: 10 PM - 8 AM            â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Pause All Coaching         â”‚    â”‚
â”‚  â”‚   (Take a break from agent)  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

5.3 "Snooze Coach" Mode
Requir ement:
User can pause all proactive agent behavior with one tap.
UI:
Implementation:â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent Actions (This Week)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  Sun, Jan 5 - 8:00 PM               â”‚
â”‚  ğŸ“…  Generated Week 2 Plan           â”‚
â”‚  â€¢ 3 workouts scheduled             â”‚
â”‚  â€¢ Avoided Wednesday (per your      â”‚
â”‚    pattern)                         â”‚
â”‚  [View Plan] [Undo]                 â”‚
â”‚                                     â”‚
â”‚  Thu, Jan 2 - 7:00 PM               â”‚
â”‚  âš   Sent Intervention               â”‚
â”‚  â€¢ You were at 1/3 workouts         â”‚
â”‚  â€¢ You chose: "Adjust to 2x"        â”‚
â”‚  [View Details]                     â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[Pause Coaching]
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Pause all agent check-ins and 
planning for:
â—‹ 1 week
â—‹ 2 weeks
â— Until I resume manually
Your resolutions stay active, but 
the agent won't send notifications 
or create plans.
[Pause] [Cancel]
python

6. UX Design Speciï¬cations
6.1 Home Scr een (Updated with Dual Intake)# When user pauses coaching
async  def pause_coaching (user_id , duration_days =None ):
    user = await  get_user (user_id )
    user .coaching_paused = True
    user .pause_until = datetime .now() + timedelta (days=duration_days ) if duration_days else None
    await  db.save(user)
    
    # Disable scheduled jobs for this user
    scheduler .pause_job (f"weekly_planning_ {user_id }")
    scheduler .pause_job (f"intervention_check_ {user_id }")
    
    opik .log_feedback (
        metric_name ="coaching_paused" ,
        value=1.0,
        metadata ={"duration_days" : duration_days }
    )
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Today                    [Profile] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  This Week's Focus                  â”‚
â”‚                                     â”‚
â”‚  Exercise 3x/week: 2/3 âœ…            â”‚
â”‚  Read 12 books: 45/60 pages âš        â”‚
â”‚                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                     â”‚
â”‚  Monday , Jan 6                      â”‚
â”‚                                     â”‚
â”‚  â˜  30-min jog (9 AM)               â”‚
â”‚     Exercise 3x/week                â”‚
â”‚     [Start] [Reschedule]            â”‚
â”‚                                     â”‚
â”‚  â˜  Read 20 pages (8 PM)            â”‚
â”‚     Read 12 books                   â”‚
â”‚     [Mark Done]                     â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤

7-12. [Remaining Sections - Str eamlined]
Key Updates to Final Sections:
Section 8 (Data Models):
Add brain_dumps table with signals_extracted JSONB ï¬eld
Add agent_actions_log table for transparency
Add user_preferences table with permission settings
Section 10 (Opik Integration):  Add 3 trace types:
1. brain_dump_processing - Signal extraction quality
2. resolution_decomposition - Planning accuracy
3. weekly_planning - Adaptation logic
4. slippage_intervention - Intervention ef fectiveness
Section 1 1 (Success Metrics):  Outcome Metrics:
Resolution completion rate (tar get: 70%)
Weekly adherence rate (tar get: 75%)
Intervention recovery rate (tar get: 60%)
Guardrail Metrics (NEW):
nudge_fatigue_rate - % users who pause/mute notiï¬cations
autonomy_violation_rate - LLM judge: % of agent messages that command vs of fer choice
undo_action_rate - % of agent actions user undoes (tar get: <5%)
Target Dashboard:â”‚  [ğŸ§   Brain Dump]  [New Resolution]  â”‚   â†  Dual intake
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

12. Implementation Plan (4 Weeks)
Week 1: Foundation + Dual Intake
 FastAPI backend with Opik SDK
 Database schema (resolutions, tasks, brain_dumps, agent_actions_log)
 Brain Dump endpoint + signal extraction (LLM)
 Resolution Setup endpoint + decomposer agent (LLM)
 React Native: Home screen, Brain Dump screen, Resolution Setup
 Opik: First 3 traces (brain_dump, resolution_decomp)
Deliverable:  User can dump brain, create resolution, see Week 1 plan
Week 2: Weekly Planner  + Permissions
 APScheduler setup for background jobs
 Weekly planning agent (Sunday 8 PM job)
 Notiï¬cation system (push to mobile)
 Permission controls UI (settings screen)
 Agent Actions Log (transparency feature)
 Opik: weekly_planning trace + plan_acceptance_rate metric
Deliverable:  Agent generates Week 2 plan autonomously , user can review/pause
Week 3: Intervention System + Guardrails
 Thursday slippage detection jobSarthi Outcomes Dashboard
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Outcome Metrics:
- Resolution Completion: 72% âœ…  (target: 70%)
- Intervention Recovery: 65% âœ…  (target: 60%)
Guardrail Metrics:
- Nudge Fatigue: 3% âœ…  (target: <5%)
- Autonomy Violations: 2% âœ…  (target: <5%)
- Action Undos: 4% âœ…  (target: <5%)
Status: Healthy - Agent is helpful, not annoying

 Intervention agent (generates 3 options)
 User response handling (reschedule / adjust / break)
 Opik: slippage_intervention trace
 LLM-as-Judge metrics:
autonomy_support_score (does agent of fer choice?)
tone_warmth (is message supportive?)
 Guardrail tracking:
`nudge_fatigue_rate